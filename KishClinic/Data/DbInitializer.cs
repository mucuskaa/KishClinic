using KishClinic.Entities;
using Microsoft.EntityFrameworkCore;

namespace KishClinic.Data
{
    public static class DbInitializer
    {
        public static async Task Initialize(KishClinicDbContext context)
        {
            await context.Database.MigrateAsync();

            if (!context.SessionTypes.Any())
            {
                var sessionTypes = new[]
                {
                    new SessionType
                    {
                        Description = "Перша консультація",
                        DefaultFee = 800M,
                        DefaultDuration = 90
                    },
                    new SessionType
                    {
                        Description = "Повторна консультація",
                        DefaultFee = 700M,
                        DefaultDuration = 60
                    },
                    new SessionType
                    {
                        Description = "Кризова консультація",
                        DefaultFee = 1000M,
                        DefaultDuration = 120
                    },
                    new SessionType
                    {
                        Description = "Онлайн консультація",
                        DefaultFee = 600M,
                        DefaultDuration = 60
                    }
                };

                context.SessionTypes.AddRange(sessionTypes);
                await context.SaveChangesAsync();
            }

            if (!context.Articles.Any())
            {
                var articles = new[]
                {
                    new Article
                    {
                        Title = "Як подолати стрес у сучасному світі",
                        Content = "Стрес став невід'ємною частиною нашого життя, але це не означає, що ми маємо з цим миритися. У цій статті ми розглянемо ефективні методи боротьби зі стресом, які ви можете почати використовувати вже сьогодні.\n\nРозуміння стресу\nСтрес - це природна реакція організму на зовнішні подразники. Він може бути як позитивним (еустрес), так і негативним (дистрес). Важливо навчитися розрізняти ці види стресу та керувати своїми реакціями.\n\nПрактичні поради\n1. Дихальні вправи\n2. Регулярні фізичні навантаження\n3. Здоровий сон\n4. Збалансоване харчування\n5. Медитація та майндфулнес\n\nКоли звертатися за допомогою\nЯкщо ви відчуваєте, що самостійно не справляєтеся зі стресом, це нормально звернутися за професійною допомогою. Психолог допоможе вам розробити індивідуальну стратегію подолання стресу.",
                        Description = "Практичні поради та техніки для ефективного управління стресом у повсякденному житті.",
                        AuthorName = "Др. Кіш Ніколетт",
                        CreatedAt = DateTime.UtcNow.AddDays(-30)
                    },
                    new Article
                    {
                        Title = "Розпізнавання симптомів тривожності",
                        Content = "Тривожність може проявлятися по-різному, і важливо вміти розпізнавати її симптоми. У цій статті ми розглянемо основні ознаки тривожного розладу та методи його подолання.\n\nФізичні симптоми\n- Прискорене серцебиття\n- Пітливість\n- Тремтіння\n- Проблеми зі сном\n- Розлади травлення\n\nПсихологічні симптоми\n- Постійне відчуття занепокоєння\n- Нав'язливі думки\n- Страх перед майбутнім\n- Проблеми з концентрацією\n\nКоли звертатися до спеціаліста\nЯкщо симптоми тривожності заважають вашому повсякденному життю, це привід звернутися за професійною допомогою. Сучасні методи психотерапії дозволяють ефективно працювати з тривожними розладами.",
                        Description = "Як розпізнати тривожний розлад та коли варто звернутися за професійною допомогою.",
                        AuthorName = "Др. Кіш Ніколетт",
                        CreatedAt = DateTime.UtcNow.AddDays(-15)
                    },
                    new Article
                    {
                        Title = "Медитація для початківців",
                        Content = "Медитація - це простий та ефективний спосіб покращити своє ментальне здоров'я. У цій статті ми розглянемо основи медитації та як почати практикувати її в повсякденному житті.\n\nЩо таке медитація\nМедитація - це практика усвідомленості, яка допомагає зосередитися на теперішньому моменті та зменшити стрес.\n\nПереваги медитації\n- Зниження рівня стресу\n- Покращення концентрації\n- Підвищення емоційної стійкості\n- Покращення якості сну\n\nЯк почати медитувати\n1. Виберіть тихе місце\n2. Займіть зручне положення\n3. Зосередьтеся на диханні\n4. Почніть з 5-10 хвилин\n5. Практикуйте регулярно\n\nПоширені помилки початківців\n- Очікування миттєвих результатів\n- Намагання повністю очистити розум\n- Самокритика при відволіканні",
                        Description = "Простий гід з медитації для тих, хто хоче почати практикувати усвідомленість.",
                        AuthorName = "Др. Кіш Ніколетт",
                        CreatedAt = DateTime.UtcNow.AddDays(-7)
                    }
                };

                context.Articles.AddRange(articles);
                await context.SaveChangesAsync();
            }
        }
    }
} 